import requests
import json
from requests.auth import HTTPBasicAuth
from pprint import pprint
import sys
from config import API_URL, CAMPUS_TOKYO
from auth_config import UID, SECRET
from get_token import get_token

def get_campus_by_id_direct(access_token, campus_id):
    headers = {
        'Authorization': f'Bearer {access_token}'
    }
    url = f"{API_URL}/v2/campus/{campus_id}"
    response = requests.get(url, headers=headers)
    if response.status_code == 200:
        return response.status_code, response.json()
    else:
        print(f"API request error: {response.status_code}")
        print(response.text)
        return response.status_code, None

if __name__ == "__main__":
    token = get_token()
    
    if not token:
        sys.exit(1)
    status, campus_data = get_campus_by_id_direct(token, CAMPUS_TOKYO)
    if not campus_data:
        sys.exit(1)
    print(json.dumps(campus_data, indent=2, ensure_ascii=False))
